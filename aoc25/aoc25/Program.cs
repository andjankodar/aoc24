var testInput = """
    #####
    .####
    .####
    .####
    .#.#.
    .#...
    .....

    #####
    ##.##
    .#.##
    ...##
    ...#.
    ...#.
    .....

    .....
    #....
    #....
    #...#
    #.#.#
    #.###
    #####

    .....
    .....
    #.#..
    ###..
    ###.#
    ###.#
    #####

    .....
    .....
    .....
    #....
    #.#..
    #.#.#
    #####
    """;

var input = """
    .....
    #....
    #...#
    #...#
    #.#.#
    #####
    #####

    .....
    .#...
    .#...
    .#..#
    ###.#
    #####
    #####

    .....
    .#.#.
    .#.##
    .####
    .####
    .####
    #####

    #####
    #.#.#
    #.#.#
    #...#
    #....
    #....
    .....

    .....
    .#...
    .#.#.
    .#.##
    .#.##
    .####
    #####

    .....
    ..#.#
    .##.#
    #####
    #####
    #####
    #####

    #####
    ##.#.
    #....
    .....
    .....
    .....
    .....

    #####
    #.#.#
    #.#.#
    #.#..
    ..#..
    .....
    .....

    .....
    #....
    #.#..
    ###..
    ####.
    ####.
    #####

    #####
    ##.##
    .#.##
    .#.#.
    .#.#.
    .#...
    .....

    .....
    ....#
    ..#.#
    .##.#
    .####
    .####
    #####

    .....
    ...#.
    .#.#.
    .#.#.
    .#.#.
    ##.##
    #####

    .....
    .....
    ....#
    ....#
    ....#
    .#.##
    #####

    #####
    ##.##
    #..##
    #..##
    #..##
    #..#.
    .....

    #####
    ####.
    ##.#.
    ##.#.
    .#.#.
    .#...
    .....

    .....
    ....#
    ....#
    ....#
    ....#
    #.#.#
    #####

    .....
    .....
    ...#.
    #.###
    #.###
    #####
    #####

    #####
    #.##.
    #.#..
    ..#..
    .....
    .....
    .....

    .....
    .....
    .....
    #..#.
    #..##
    ##.##
    #####

    .....
    .#...
    ##...
    ##..#
    ##.##
    ##.##
    #####

    #####
    .####
    .#.##
    ...##
    ....#
    .....
    .....

    #####
    #####
    #####
    #####
    #.###
    #..#.
    .....

    .....
    .....
    .....
    .#...
    .#...
    .##.#
    #####

    .....
    #.#..
    #.#..
    #.#..
    #.#.#
    ###.#
    #####

    #####
    #####
    #####
    ####.
    ####.
    #.#..
    .....

    #####
    #####
    .####
    .#.##
    ...#.
    .....
    .....

    #####
    ###.#
    .##.#
    .##.#
    .##.#
    .#...
    .....

    .....
    #.#..
    #.#..
    #.#..
    #.##.
    ####.
    #####

    .....
    ...#.
    .#.##
    ##.##
    ##.##
    #####
    #####

    .....
    #..#.
    #.##.
    #.###
    #.###
    #####
    #####

    #####
    #.###
    ...##
    ...##
    ...#.
    ...#.
    .....

    .....
    .#...
    ###..
    ###..
    ###..
    ###.#
    #####

    #####
    #####
    #####
    #.#.#
    ..#.#
    ..#.#
    .....

    #####
    .#.##
    .#.#.
    .#.#.
    .#.#.
    .....
    .....

    .....
    ...#.
    ...##
    .#.##
    #####
    #####
    #####

    .....
    .....
    ...#.
    ...#.
    .#.##
    ##.##
    #####

    .....
    #..#.
    ##.#.
    ####.
    #####
    #####
    #####

    .....
    .#...
    .#...
    .#...
    .#.#.
    ##.##
    #####

    .....
    .....
    .....
    ...#.
    .#.#.
    .#.##
    #####

    .....
    ...#.
    ...#.
    .#.#.
    ##.#.
    #####
    #####

    .....
    ..#..
    ..#..
    #.##.
    ####.
    #####
    #####

    .....
    #.#..
    #.#..
    #.##.
    #.###
    #.###
    #####

    .....
    .....
    ...#.
    ..##.
    .###.
    .####
    #####

    .....
    .#.#.
    #####
    #####
    #####
    #####
    #####

    .....
    .....
    #....
    ##..#
    ###.#
    ###.#
    #####

    #####
    ###.#
    #.#..
    #....
    #....
    #....
    .....

    .....
    ..#..
    ..#..
    #.#..
    ###.#
    ###.#
    #####

    #####
    .####
    .###.
    .#.#.
    .#.#.
    .....
    .....

    .....
    #..#.
    #..#.
    #..##
    #.###
    #####
    #####

    .....
    #....
    ##.#.
    ##.#.
    ##.#.
    ####.
    #####

    .....
    ..#..
    ..#..
    ..##.
    ..###
    #.###
    #####

    #####
    #.#.#
    #....
    #....
    #....
    .....
    .....

    .....
    ..#..
    #.##.
    #####
    #####
    #####
    #####

    .....
    .#...
    .##..
    .##.#
    ###.#
    ###.#
    #####

    .....
    ..#..
    ..#..
    ..#..
    .##.#
    .##.#
    #####

    .....
    ..#..
    #.#..
    #.#..
    #.#..
    #.##.
    #####

    #####
    #####
    .#.#.
    ...#.
    .....
    .....
    .....

    #####
    #####
    ###.#
    ##..#
    ##..#
    #....
    .....

    #####
    .#.##
    .#.##
    .#..#
    .#..#
    .#...
    .....

    .....
    ...#.
    ..##.
    ..###
    .####
    #####
    #####

    #####
    #####
    .#.##
    .#.#.
    .....
    .....
    .....

    #####
    #####
    ##.##
    .#.##
    .#.#.
    .#...
    .....

    #####
    ##.##
    .#.##
    .#..#
    ....#
    ....#
    .....

    #####
    .#.##
    .#.##
    .#.#.
    .#.#.
    ...#.
    .....

    #####
    ##.##
    ##.##
    ##..#
    ##..#
    .#..#
    .....

    #####
    .####
    ..##.
    ..##.
    ..##.
    ...#.
    .....

    #####
    #####
    #####
    .###.
    .#.#.
    .....
    .....

    .....
    ...#.
    ...#.
    #.###
    #.###
    #####
    #####

    #####
    ####.
    ##.#.
    .#.#.
    ...#.
    .....
    .....

    #####
    .####
    .#.#.
    .#.#.
    ...#.
    .....
    .....

    .....
    .....
    ..#..
    #.#..
    ###.#
    #####
    #####

    #####
    ####.
    ####.
    ####.
    #.##.
    ..#..
    .....

    .....
    .....
    .#...
    .#.#.
    ##.#.
    ##.#.
    #####

    #####
    #####
    #####
    ###.#
    .##.#
    ..#.#
    .....

    #####
    #####
    ##.#.
    .#...
    .#...
    .....
    .....

    .....
    .#...
    .#.#.
    ##.#.
    ##.#.
    ##.#.
    #####

    .....
    .#.#.
    .###.
    ####.
    #####
    #####
    #####

    #####
    #.###
    #.##.
    #.##.
    #.##.
    #..#.
    .....

    #####
    #.###
    #.###
    #.###
    #.###
    ...#.
    .....

    .....
    ..#..
    ..#..
    ..#..
    .###.
    ####.
    #####

    #####
    #####
    .##.#
    .##.#
    .##..
    .#...
    .....

    #####
    #####
    ##.##
    ##.##
    .#..#
    ....#
    .....

    .....
    .....
    #.#..
    #.#..
    #.#.#
    #.###
    #####

    .....
    .....
    .#...
    ##.#.
    ##.#.
    ##.#.
    #####

    .....
    #.#..
    #.##.
    #.###
    #.###
    #####
    #####

    #####
    #####
    #####
    ##.#.
    ##.#.
    #..#.
    .....

    #####
    .#.##
    .#..#
    .#...
    .....
    .....
    .....

    #####
    ##.##
    ##.##
    ##..#
    .#...
    .....
    .....

    .....
    .#.#.
    ####.
    ####.
    #####
    #####
    #####

    #####
    ####.
    .###.
    ..##.
    ..#..
    .....
    .....

    .....
    ....#
    #...#
    #..##
    ##.##
    ##.##
    #####

    #####
    ###.#
    .##.#
    .##..
    .#...
    .....
    .....

    #####
    .####
    .#.##
    ...##
    ...#.
    .....
    .....

    .....
    ...#.
    ..##.
    .###.
    #####
    #####
    #####

    #####
    #####
    ##.##
    ##..#
    ##...
    .#...
    .....

    .....
    ...#.
    .#.#.
    ##.#.
    ##.##
    #####
    #####

    #####
    #####
    ##.##
    #...#
    #...#
    ....#
    .....

    #####
    #.###
    #..##
    #..##
    #...#
    .....
    .....

    #####
    #####
    ###.#
    #.#.#
    #...#
    ....#
    .....

    .....
    .....
    .....
    ..#..
    ..##.
    .###.
    #####

    .....
    ..#..
    #.#..
    ###..
    ###..
    ####.
    #####

    .....
    ...#.
    ...#.
    #..##
    #..##
    #.###
    #####

    .....
    ..#..
    ..#.#
    #.###
    #.###
    #####
    #####

    .....
    ....#
    ..#.#
    ..#.#
    ..#.#
    #.###
    #####

    #####
    #####
    #.#.#
    ..#.#
    ....#
    .....
    .....

    .....
    .....
    ....#
    ....#
    ....#
    #.#.#
    #####

    .....
    .....
    .....
    #.#..
    ###..
    ####.
    #####

    #####
    #####
    ###.#
    .#..#
    .....
    .....
    .....

    .....
    .#...
    .#.#.
    .####
    .####
    .####
    #####

    .....
    ...#.
    #..#.
    #..#.
    #.##.
    ####.
    #####

    #####
    #####
    ##.##
    ##.##
    .#..#
    .#...
    .....

    .....
    .....
    #.#..
    ###.#
    #####
    #####
    #####

    #####
    #.#.#
    #.#.#
    #.#.#
    #.#..
    .....
    .....

    #####
    #.###
    #..##
    #..##
    ...#.
    ...#.
    .....

    #####
    .####
    .#.##
    .#..#
    .#..#
    .#..#
    .....

    .....
    ...#.
    ...#.
    ...#.
    ...##
    #.###
    #####

    .....
    ...#.
    ..##.
    ..##.
    .###.
    .####
    #####

    #####
    #####
    ####.
    #.#..
    ..#..
    .....
    .....

    #####
    ####.
    ###..
    .#...
    .....
    .....
    .....

    .....
    ..#..
    .##..
    ####.
    ####.
    ####.
    #####

    .....
    ....#
    ....#
    ..#.#
    .##.#
    .####
    #####

    .....
    ...#.
    ...#.
    ...#.
    .#.##
    ##.##
    #####

    .....
    .#..#
    ###.#
    ###.#
    ###.#
    #####
    #####

    #####
    #####
    ####.
    ####.
    ##.#.
    #....
    .....

    .....
    ..#.#
    ..#.#
    .####
    .####
    .####
    #####

    #####
    #####
    ###.#
    .#..#
    .#...
    .....
    .....

    .....
    ...#.
    #.##.
    #.##.
    #.###
    #.###
    #####

    .....
    #.#..
    #.#..
    ###..
    ###.#
    #####
    #####

    #####
    #.###
    #.##.
    #.##.
    ..#..
    .....
    .....

    #####
    .##.#
    .##.#
    .#..#
    .#..#
    .#...
    .....

    #####
    .####
    .####
    .##.#
    ..#.#
    ..#..
    .....

    .....
    ..#.#
    ..#.#
    .##.#
    .##.#
    #####
    #####

    .....
    .....
    .....
    ..#..
    .###.
    .###.
    #####

    #####
    #####
    #.##.
    ...#.
    ...#.
    .....
    .....

    #####
    #####
    #####
    ##.##
    #..##
    #...#
    .....

    .....
    #....
    #..#.
    ##.##
    #####
    #####
    #####

    .....
    #.#..
    #.#..
    #.#.#
    #.#.#
    #####
    #####

    .....
    .#...
    .##..
    ###..
    ###..
    ####.
    #####

    .....
    ...#.
    ..##.
    ..##.
    .###.
    #####
    #####

    #####
    ###.#
    .##.#
    .#..#
    .#..#
    ....#
    .....

    .....
    ...#.
    ...#.
    ..###
    ..###
    .####
    #####

    #####
    ###.#
    ###.#
    ###.#
    ##..#
    #....
    .....

    #####
    #.###
    #.#.#
    #.#.#
    #.#.#
    ....#
    .....

    .....
    #....
    #....
    ##...
    ##..#
    ###.#
    #####

    .....
    ..#..
    ..#..
    #.#.#
    #.#.#
    #.###
    #####

    .....
    #.#.#
    #.#.#
    ###.#
    #####
    #####
    #####

    #####
    ##.##
    ##.##
    ##.#.
    #..#.
    ...#.
    .....

    #####
    #.#.#
    ..#..
    .....
    .....
    .....
    .....

    #####
    #.###
    ...##
    ...##
    ...##
    ....#
    .....

    #####
    .####
    .#.##
    .#.##
    .#.##
    ....#
    .....

    .....
    #....
    #.#..
    ####.
    ####.
    #####
    #####

    .....
    ..#..
    ..#..
    ..##.
    ..##.
    #.###
    #####

    #####
    #####
    #.##.
    #..#.
    #..#.
    ...#.
    .....

    .....
    .#...
    .#...
    .#...
    ###..
    ###.#
    #####

    #####
    .####
    .####
    .#.#.
    ...#.
    ...#.
    .....

    #####
    #####
    .#.#.
    .#.#.
    .#.#.
    .#...
    .....

    .....
    .....
    ....#
    ...##
    ..###
    .####
    #####

    #####
    .###.
    .###.
    .###.
    .#.#.
    .....
    .....

    .....
    .....
    .#...
    .#.#.
    .#.#.
    .#.#.
    #####

    #####
    ##.##
    #..##
    #..#.
    #....
    #....
    .....

    #####
    #####
    #.###
    ..##.
    ..#..
    .....
    .....

    #####
    #.###
    ..##.
    ..#..
    ..#..
    .....
    .....

    #####
    #.#.#
    #.#.#
    #....
    #....
    #....
    .....

    #####
    #####
    .###.
    .##..
    .#...
    .#...
    .....

    .....
    .....
    .....
    #.#.#
    #.#.#
    #####
    #####

    #####
    #.###
    #.##.
    #..#.
    #..#.
    #..#.
    .....

    .....
    ..#..
    .##..
    .##.#
    .####
    #####
    #####

    #####
    ##.##
    ##.#.
    #....
    #....
    #....
    .....

    .....
    ...#.
    ...#.
    #..#.
    #.###
    #.###
    #####

    #####
    ##.##
    ##.#.
    #..#.
    #..#.
    .....
    .....

    .....
    ...#.
    ...#.
    #..#.
    #..##
    ##.##
    #####

    .....
    #...#
    #.#.#
    #.#.#
    ###.#
    #####
    #####

    #####
    #.#.#
    #.#.#
    #.#.#
    #.#.#
    ....#
    .....

    .....
    ..#..
    ..#..
    .##..
    .###.
    #####
    #####

    #####
    #.###
    ..#.#
    ..#.#
    ..#.#
    ..#.#
    .....

    .....
    .#.#.
    .###.
    .####
    .####
    #####
    #####

    .....
    .....
    ..#..
    #.#..
    #.#..
    ####.
    #####

    #####
    .####
    .####
    ..###
    ...#.
    ...#.
    .....

    #####
    #.##.
    #.#..
    #.#..
    #.#..
    .....
    .....

    #####
    #.###
    #.###
    #.#.#
    ..#.#
    ..#..
    .....

    #####
    ###.#
    ###.#
    #.#.#
    #.#.#
    .....
    .....

    .....
    #...#
    #...#
    #...#
    ##..#
    ###.#
    #####

    #####
    ###.#
    #.#.#
    ..#..
    ..#..
    .....
    .....

    .....
    .....
    #....
    #..#.
    ##.#.
    ####.
    #####

    .....
    ..#..
    #.#..
    #.##.
    ####.
    ####.
    #####

    #####
    .##.#
    .#..#
    .#...
    .#...
    .#...
    .....

    #####
    ###.#
    ###.#
    ###.#
    .##.#
    ..#..
    .....

    .....
    .....
    ....#
    ..#.#
    ..#.#
    #.###
    #####

    .....
    ....#
    #...#
    ##.##
    ##.##
    #####
    #####

    .....
    .#.#.
    .#.#.
    ####.
    ####.
    ####.
    #####

    #####
    ##.##
    ##.##
    .#.##
    .#.##
    ....#
    .....

    #####
    #.#.#
    #.#.#
    #...#
    .....
    .....
    .....

    .....
    .....
    ....#
    .#..#
    .#.##
    .#.##
    #####

    .....
    ..#..
    ..#..
    ..##.
    ..##.
    #.##.
    #####

    #####
    #####
    #####
    .#.#.
    .#...
    .#...
    .....

    .....
    ..#..
    ..#.#
    #.#.#
    #.###
    #####
    #####

    .....
    .#...
    .#...
    .#...
    .#..#
    ###.#
    #####

    #####
    #####
    .####
    .####
    .####
    .#.#.
    .....

    #####
    #.###
    #.###
    #..##
    #...#
    #....
    .....

    .....
    .#...
    .#.#.
    .#.#.
    .#.#.
    .####
    #####

    #####
    ###.#
    ##..#
    ##..#
    #...#
    .....
    .....

    #####
    .#.##
    .#.##
    ...#.
    .....
    .....
    .....

    .....
    .#...
    .#..#
    .#..#
    ##.##
    ##.##
    #####

    .....
    .....
    ..#..
    #.#.#
    #####
    #####
    #####

    #####
    #####
    #####
    .####
    ..#.#
    ..#..
    .....

    #####
    ##.##
    .#.#.
    .#...
    .#...
    .#...
    .....

    .....
    .#..#
    .#..#
    .#..#
    .#.##
    #####
    #####

    #####
    ###.#
    #.#.#
    ..#.#
    .....
    .....
    .....

    #####
    ###.#
    .##.#
    .#..#
    ....#
    .....
    .....

    #####
    #####
    ##.##
    ##.#.
    #..#.
    #..#.
    .....

    #####
    #####
    #.###
    #.##.
    #..#.
    #..#.
    .....

    #####
    #####
    ##.##
    .#.#.
    ...#.
    ...#.
    .....

    #####
    #####
    #####
    #.#.#
    #.#.#
    #.#..
    .....

    .....
    .#...
    .##..
    .##..
    .###.
    .####
    #####

    #####
    #####
    ####.
    #.#..
    #.#..
    #....
    .....

    #####
    ###.#
    ##..#
    #....
    .....
    .....
    .....

    #####
    .#.##
    .#.##
    .#.##
    .#.##
    ...#.
    .....

    .....
    #....
    #....
    ##.#.
    ##.#.
    ##.##
    #####

    #####
    ##.##
    #..#.
    #..#.
    ...#.
    ...#.
    .....

    #####
    .#.##
    .#.##
    .#.##
    .#..#
    .#..#
    .....

    #####
    #####
    .####
    .##.#
    .##..
    ..#..
    .....

    .....
    #....
    #.#..
    #.#..
    #.##.
    ####.
    #####

    .....
    .....
    .#...
    ###..
    ###.#
    #####
    #####

    .....
    ..#..
    ..#..
    ..#..
    ..#..
    .###.
    #####

    #####
    .####
    .#.##
    .#.##
    .#.#.
    .#.#.
    .....

    .....
    #.#..
    ###..
    ####.
    ####.
    ####.
    #####

    #####
    #.##.
    #.##.
    #.##.
    #.##.
    ...#.
    .....

    #####
    ####.
    #.##.
    #.##.
    #..#.
    #..#.
    .....

    .....
    .....
    ...#.
    ...#.
    #..#.
    ##.#.
    #####

    #####
    ###.#
    #.#.#
    #.#.#
    #.#..
    ..#..
    .....

    .....
    .#...
    ##...
    ##...
    ##.#.
    #####
    #####

    #####
    ##.##
    .#..#
    .#...
    .....
    .....
    .....

    #####
    #####
    #.###
    #.###
    ..#.#
    ..#..
    .....

    #####
    #####
    ####.
    ##.#.
    #....
    #....
    .....

    #####
    #.###
    #.###
    #..##
    ...##
    ...#.
    .....

    #####
    ###.#
    ###.#
    ###..
    .##..
    .#...
    .....

    .....
    .#.#.
    .#.#.
    .#.#.
    ##.#.
    ####.
    #####

    #####
    ###.#
    #.#.#
    #.#.#
    #.#.#
    ..#.#
    .....

    .....
    .....
    .....
    ....#
    ..#.#
    .####
    #####

    .....
    ..#..
    #.#.#
    #.###
    #.###
    #####
    #####

    .....
    .#...
    .#..#
    .##.#
    .##.#
    .####
    #####

    #####
    .##.#
    .##.#
    .##.#
    ..#.#
    .....
    .....

    .....
    ..#..
    #.#..
    #.#..
    #.#..
    ###.#
    #####

    #####
    ####.
    ##.#.
    #....
    #....
    #....
    .....

    #####
    #####
    #####
    ####.
    ####.
    .#.#.
    .....

    #####
    #.###
    #.#.#
    ..#.#
    ..#.#
    ....#
    .....

    .....
    .#..#
    .#.##
    ##.##
    #####
    #####
    #####

    .....
    .#.#.
    .#.##
    #####
    #####
    #####
    #####

    .....
    .#...
    .#...
    .#...
    .#...
    ###.#
    #####

    .....
    .....
    .....
    .#...
    .#.#.
    ##.##
    #####

    #####
    .####
    .##.#
    ..#.#
    ..#.#
    ....#
    .....

    .....
    #....
    #...#
    #.#.#
    #.#.#
    #.###
    #####

    .....
    ..#..
    #.#..
    #.##.
    #.###
    #####
    #####

    .....
    ....#
    #..##
    #.###
    #####
    #####
    #####

    .....
    .....
    .....
    #....
    ##.#.
    ##.#.
    #####

    .....
    .#...
    .#...
    ##..#
    ##.##
    #####
    #####

    #####
    ###.#
    ###.#
    ##..#
    ##...
    #....
    .....

    #####
    #.###
    #.###
    ...##
    ...#.
    ...#.
    .....

    .....
    .....
    ..#..
    ..#.#
    .##.#
    #####
    #####

    .....
    .#...
    .#..#
    .#.##
    .#.##
    ##.##
    #####

    .....
    ....#
    ....#
    #..##
    #..##
    ##.##
    #####

    #####
    #####
    #####
    .####
    ..###
    ...#.
    .....

    #####
    #.###
    ..###
    ..###
    ..#.#
    ....#
    .....

    #####
    #####
    ##.##
    #..##
    #..#.
    .....
    .....

    #####
    ###.#
    ###.#
    #.#.#
    #...#
    .....
    .....

    .....
    #....
    #.#..
    ###.#
    #####
    #####
    #####

    #####
    ####.
    ####.
    ####.
    .###.
    .#.#.
    .....

    #####
    .##.#
    .##.#
    ..#..
    .....
    .....
    .....

    .....
    .#.#.
    .#.#.
    .#.#.
    .####
    #####
    #####

    #####
    #####
    ####.
    ##.#.
    .#.#.
    .#...
    .....

    .....
    .#...
    ##..#
    ##.##
    ##.##
    ##.##
    #####

    #####
    .#.##
    .#.##
    ...##
    ....#
    ....#
    .....

    #####
    #.##.
    #.##.
    #.##.
    ..#..
    .....
    .....

    #####
    #####
    #.###
    #.###
    #.###
    ...#.
    .....

    #####
    #.###
    #.###
    #.###
    #.#.#
    #.#..
    .....

    #####
    ##.##
    ##.##
    ##..#
    #...#
    ....#
    .....

    #####
    ###.#
    ###.#
    ###.#
    .##..
    ..#..
    .....

    #####
    .#.##
    .#.##
    ...##
    ...##
    ....#
    .....

    .....
    .....
    #..#.
    #.##.
    #####
    #####
    #####

    .....
    .....
    ....#
    .#..#
    ##.##
    #####
    #####

    #####
    .####
    .####
    .##.#
    .##..
    .#...
    .....

    .....
    .#.#.
    .#.#.
    ##.#.
    ##.#.
    ####.
    #####

    .....
    #....
    #....
    #.#.#
    ###.#
    #####
    #####

    .....
    .....
    ..#..
    .##..
    .##.#
    .####
    #####

    .....
    .....
    #...#
    #..##
    #..##
    #.###
    #####

    .....
    .#...
    .#.#.
    .#.#.
    ##.#.
    ####.
    #####

    .....
    .....
    ..#..
    ..##.
    #.###
    #####
    #####

    #####
    .###.
    .#.#.
    .#...
    .#...
    .....
    .....

    #####
    #####
    ##.##
    ##.#.
    #..#.
    ...#.
    .....

    .....
    .....
    ...#.
    ...#.
    ..##.
    .####
    #####

    .....
    .....
    ..#..
    ..#.#
    ..#.#
    .##.#
    #####

    .....
    .#...
    .#..#
    .##.#
    .##.#
    ###.#
    #####

    .....
    .....
    .#...
    .#...
    ##.#.
    ##.#.
    #####

    .....
    .#...
    .#.#.
    ##.#.
    ##.#.
    ##.##
    #####

    .....
    .....
    .....
    ..#.#
    .####
    .####
    #####

    .....
    .....
    ....#
    #...#
    ##..#
    ###.#
    #####

    .....
    .....
    ..#..
    .##.#
    .####
    #####
    #####

    #####
    #.###
    #.#.#
    #.#.#
    ..#.#
    ..#..
    .....

    #####
    #####
    #####
    #.###
    #.##.
    #.#..
    .....

    .....
    .....
    ..#..
    ..##.
    ..##.
    #.##.
    #####

    #####
    .####
    .####
    .####
    ..#.#
    ..#.#
    .....

    .....
    .....
    ..#.#
    ..#.#
    ..#.#
    .####
    #####

    .....
    #....
    #....
    #...#
    #...#
    ##.##
    #####

    #####
    ##.##
    ##..#
    ##..#
    .#...
    .#...
    .....

    #####
    ##.##
    ##.##
    .#.#.
    ...#.
    ...#.
    .....

    .....
    .....
    .#...
    .#..#
    ###.#
    #####
    #####

    #####
    #####
    ####.
    .###.
    .#.#.
    ...#.
    .....

    .....
    .....
    .#..#
    ###.#
    #####
    #####
    #####

    .....
    ...#.
    ...#.
    #..#.
    #..#.
    ##.##
    #####

    #####
    #####
    #####
    ##.##
    ##..#
    .#..#
    .....

    #####
    ####.
    #.##.
    #.#..
    #.#..
    #.#..
    .....

    .....
    ..#..
    .##..
    .##..
    .##.#
    .##.#
    #####

    #####
    #.###
    #.#.#
    #.#..
    #.#..
    #.#..
    .....

    .....
    .#.#.
    ####.
    ####.
    ####.
    #####
    #####

    #####
    ###.#
    ##..#
    ##..#
    #...#
    ....#
    .....

    .....
    #....
    #.#.#
    #.###
    #.###
    #####
    #####

    #####
    #####
    ##.##
    ##..#
    ##..#
    #...#
    .....

    #####
    ###.#
    ###.#
    ###.#
    ###.#
    .#...
    .....

    #####
    .####
    ..###
    ..#.#
    ..#.#
    ..#.#
    .....

    #####
    #####
    ##.##
    .#.##
    .#.#.
    .....
    .....

    .....
    ..#..
    #.#..
    #.##.
    #.##.
    ####.
    #####

    .....
    ...#.
    #..#.
    #.##.
    #.##.
    ####.
    #####

    .....
    ....#
    .#..#
    .#.##
    .#.##
    .####
    #####

    #####
    ###.#
    .#..#
    .#..#
    .#..#
    .#...
    .....

    .....
    ..#.#
    ..#.#
    ..###
    ..###
    .####
    #####

    #####
    #.###
    #.#.#
    ....#
    ....#
    .....
    .....

    #####
    #####
    ###.#
    ###.#
    .#..#
    .....
    .....

    .....
    #....
    #...#
    #..##
    #..##
    ##.##
    #####

    .....
    .#..#
    .#..#
    .#..#
    .#..#
    .##.#
    #####

    .....
    #....
    #.#..
    #.#..
    #.#..
    #.#.#
    #####

    .....
    .....
    .#...
    .#.#.
    ##.#.
    ##.##
    #####

    #####
    #####
    ##.##
    #..#.
    .....
    .....
    .....

    #####
    #.###
    #.#.#
    #.#.#
    #.#..
    ..#..
    .....

    #####
    ###.#
    ###.#
    ###.#
    .#...
    .#...
    .....

    .....
    #.#..
    #.#..
    ###.#
    ###.#
    #####
    #####

    #####
    ####.
    ####.
    .###.
    ..##.
    ...#.
    .....

    .....
    ....#
    ....#
    ..#.#
    ..###
    #.###
    #####

    .....
    #.#..
    #.#..
    #.##.
    #.##.
    #####
    #####

    #####
    ##.##
    ##.##
    .#..#
    .#..#
    .....
    .....

    #####
    ##.##
    #..##
    ...##
    ....#
    ....#
    .....

    #####
    #####
    ###.#
    .##..
    .##..
    .#...
    .....

    .....
    .....
    ....#
    .#..#
    .#.##
    .####
    #####

    #####
    #####
    #.###
    #.##.
    ...#.
    ...#.
    .....

    #####
    ##.##
    ##.#.
    .#.#.
    .....
    .....
    .....

    #####
    #####
    #####
    .##.#
    ..#.#
    ....#
    .....

    #####
    ###.#
    ##..#
    ##...
    #....
    #....
    .....

    .....
    .....
    ..#..
    ..#..
    #.#.#
    #.#.#
    #####

    .....
    #....
    #....
    #.#.#
    #.#.#
    #####
    #####

    #####
    ##.##
    ##.#.
    ##...
    ##...
    #....
    .....

    .....
    #....
    #.#.#
    #.#.#
    #.#.#
    #.###
    #####

    #####
    ####.
    .##..
    .#...
    .#...
    .....
    .....

    #####
    #.###
    #.###
    ...##
    ....#
    .....
    .....

    .....
    ..#..
    .##.#
    .##.#
    .##.#
    ###.#
    #####

    .....
    #....
    #....
    #....
    ##.#.
    ####.
    #####

    #####
    #.##.
    ...#.
    ...#.
    ...#.
    ...#.
    .....

    .....
    .#...
    .##..
    .###.
    .###.
    ####.
    #####

    #####
    #####
    ###.#
    ###.#
    #.#..
    .....
    .....

    #####
    #####
    #####
    ###.#
    #.#.#
    #.#..
    .....

    .....
    ..#..
    #.#..
    ###.#
    ###.#
    ###.#
    #####

    #####
    ###.#
    .##.#
    .#..#
    .#..#
    .....
    .....

    .....
    #...#
    ##..#
    ##..#
    ##..#
    ###.#
    #####

    .....
    .....
    ..#..
    #.#.#
    #.#.#
    ###.#
    #####

    #####
    #.##.
    #.##.
    #.#..
    ..#..
    ..#..
    .....

    #####
    #####
    #####
    .###.
    .###.
    .#.#.
    .....

    .....
    .....
    .#.#.
    ####.
    ####.
    #####
    #####

    #####
    ##.##
    ##.##
    ##.##
    #...#
    #...#
    .....

    .....
    .....
    .#.#.
    .#.#.
    .#.##
    ##.##
    #####

    .....
    .#...
    .#...
    .##..
    .###.
    #####
    #####

    .....
    .#.#.
    .#.#.
    ##.##
    ##.##
    #####
    #####

    #####
    #.##.
    ..#..
    ..#..
    .....
    .....
    .....

    .....
    #....
    ##.#.
    ##.#.
    ##.#.
    ##.#.
    #####

    .....
    ....#
    ..#.#
    #.#.#
    #####
    #####
    #####

    .....
    .....
    ..#..
    ..#..
    #.#..
    ####.
    #####

    .....
    .#.#.
    .#.#.
    .####
    #####
    #####
    #####

    .....
    .....
    ....#
    ....#
    #.#.#
    #.#.#
    #####

    .....
    #....
    #.#..
    #.#..
    #.##.
    #.##.
    #####

    #####
    ####.
    ####.
    .##..
    ..#..
    .....
    .....

    .....
    .....
    .....
    #....
    #....
    #.#.#
    #####

    .....
    ..#..
    ..##.
    ..##.
    ..###
    #.###
    #####

    .....
    .....
    .....
    ....#
    #...#
    #.#.#
    #####

    .....
    .#...
    .##..
    ###..
    ####.
    #####
    #####

    #####
    .###.
    .###.
    .##..
    ..#..
    ..#..
    .....

    #####
    #.#.#
    #.#.#
    #.#.#
    #.#.#
    #....
    .....

    #####
    #.###
    #..##
    #...#
    ....#
    ....#
    .....

    .....
    #..#.
    #..#.
    #..#.
    ##.#.
    ####.
    #####

    .....
    .....
    ...#.
    #..#.
    #.##.
    #####
    #####

    .....
    .....
    ..#..
    #.#..
    #.##.
    #.###
    #####

    #####
    #####
    ####.
    #.#..
    .....
    .....
    .....

    .....
    .#..#
    .#..#
    .#..#
    .##.#
    .##.#
    #####

    .....
    .#..#
    ##..#
    ##..#
    ##..#
    ##.##
    #####

    .....
    .....
    .....
    .#.#.
    .#.#.
    .#.##
    #####

    #####
    .####
    .###.
    .###.
    .##..
    ..#..
    .....

    #####
    #.#.#
    #.#.#
    ..#.#
    ..#.#
    .....
    .....

    .....
    .....
    .....
    .#.#.
    .###.
    ####.
    #####

    .....
    ....#
    ....#
    #...#
    ##.##
    #####
    #####

    #####
    ####.
    ####.
    ###..
    ##...
    #....
    .....

    .....
    ....#
    ....#
    .#..#
    .##.#
    .##.#
    #####

    #####
    #####
    ##.#.
    ##.#.
    #..#.
    #....
    .....

    .....
    ...#.
    .#.#.
    .###.
    .####
    .####
    #####

    #####
    #####
    ##.##
    ##..#
    ##..#
    .#..#
    .....

    #####
    ##.##
    ##.##
    ##.##
    ##..#
    #...#
    .....

    #####
    #.###
    #..##
    #..##
    #...#
    #...#
    .....

    #####
    #.#.#
    #.#.#
    ....#
    ....#
    .....
    .....

    .....
    ..#..
    ..#..
    ..#..
    ..#..
    #.##.
    #####

    #####
    #####
    #####
    ##.#.
    #..#.
    .....
    .....

    #####
    #.###
    #.##.
    #.##.
    ...#.
    .....
    .....

    .....
    #..#.
    #..#.
    #.##.
    #.###
    #.###
    #####

    #####
    #####
    ##.##
    ##.##
    ##..#
    .#..#
    .....

    .....
    #....
    #..#.
    #..#.
    #..##
    #.###
    #####

    .....
    .....
    .....
    ..#.#
    .##.#
    .####
    #####

    #####
    #####
    .####
    ..###
    ...#.
    ...#.
    .....

    #####
    #####
    ##.##
    ##.##
    ##.##
    .#..#
    .....

    .....
    .....
    #..#.
    #..##
    #..##
    #.###
    #####

    #####
    ###.#
    ##..#
    ##...
    .#...
    .....
    .....

    .....
    ..#..
    #.#.#
    ###.#
    ###.#
    ###.#
    #####

    #####
    .###.
    .###.
    ..##.
    ..##.
    ...#.
    .....

    .....
    .#...
    .#...
    .#..#
    .##.#
    .##.#
    #####

    #####
    #.#.#
    #.#.#
    .....
    .....
    .....
    .....

    .....
    ...#.
    ...#.
    .#.#.
    .###.
    .####
    #####

    .....
    .#..#
    .#.##
    .#.##
    ##.##
    #####
    #####

    .....
    ..#..
    ..#..
    ..##.
    ..##.
    .###.
    #####

    #####
    #####
    #.###
    #.#.#
    #.#.#
    #...#
    .....

    .....
    ..#..
    #.#..
    ####.
    ####.
    ####.
    #####

    #####
    #.#.#
    ....#
    ....#
    ....#
    ....#
    .....

    .....
    .....
    .....
    ..#.#
    .##.#
    .##.#
    #####

    .....
    #....
    #....
    #.#..
    ###.#
    #####
    #####

    #####
    ###.#
    ###.#
    ##...
    .#...
    .....
    .....

    .....
    ..#..
    ..#..
    ..##.
    .###.
    #####
    #####

    .....
    .....
    ...#.
    ...##
    #..##
    #.###
    #####

    #####
    #####
    ##.##
    .#.##
    .#.#.
    .#.#.
    .....

    #####
    ####.
    ####.
    ##.#.
    .#...
    .#...
    .....

    .....
    .....
    .....
    .#..#
    .#..#
    .#.##
    #####

    #####
    ##.##
    .#.##
    .#..#
    .#..#
    .....
    .....

    #####
    #.#.#
    ....#
    .....
    .....
    .....
    .....

    #####
    #####
    #####
    #.###
    #.#.#
    #.#..
    .....

    #####
    #####
    ##.##
    ##.##
    ##..#
    #...#
    .....

    .....
    .....
    .....
    #....
    ##..#
    ###.#
    #####

    #####
    #####
    ##.##
    #..##
    #...#
    .....
    .....

    .....
    .....
    .....
    ..#..
    ..#..
    #.##.
    #####

    .....
    .....
    .....
    #.#.#
    #.###
    #####
    #####

    #####
    ##.##
    ##.##
    ##.#.
    #..#.
    #..#.
    .....

    #####
    ###.#
    ###.#
    ###.#
    #.#..
    #.#..
    .....

    #####
    #.##.
    ..##.
    ..##.
    ..#..
    ..#..
    .....

    #####
    ##.##
    .#.##
    .#.##
    .#..#
    .#..#
    .....

    #####
    .#.##
    .#.##
    .#..#
    .#...
    .....
    .....

    #####
    ###.#
    .##.#
    .##.#
    ..#.#
    ..#..
    .....

    #####
    .####
    ..#.#
    ....#
    .....
    .....
    .....

    .....
    ....#
    ...##
    #.###
    #.###
    #####
    #####

    #####
    #####
    #####
    ##.##
    .#.#.
    .#.#.
    .....

    #####
    ###.#
    ###..
    #.#..
    ..#..
    .....
    .....

    .....
    ...#.
    ..###
    ..###
    #.###
    #####
    #####

    .....
    ....#
    ....#
    ....#
    .#.##
    ##.##
    #####

    .....
    .....
    ....#
    ....#
    #.#.#
    ###.#
    #####

    #####
    #####
    #.###
    ...#.
    ...#.
    .....
    .....

    .....
    #..#.
    #.###
    #.###
    #####
    #####
    #####

    #####
    .#.##
    ...##
    ....#
    ....#
    .....
    .....

    #####
    #####
    .#.#.
    ...#.
    ...#.
    ...#.
    .....

    #####
    .####
    .####
    .#.##
    ....#
    ....#
    .....

    .....
    .#..#
    .#.##
    ##.##
    ##.##
    #####
    #####

    #####
    .##.#
    .#...
    .....
    .....
    .....
    .....

    .....
    ...#.
    ...#.
    #..#.
    ##.#.
    ##.##
    #####

    .....
    .....
    ...#.
    .#.##
    .####
    .####
    #####

    .....
    .#...
    .##..
    .##..
    .##..
    .###.
    #####

    .....
    #....
    #....
    #.#..
    #.##.
    ####.
    #####

    #####
    .####
    .####
    .#.##
    .#.#.
    .....
    .....

    #####
    .#.##
    ...##
    ...#.
    ...#.
    .....
    .....

    .....
    .....
    .#.#.
    ##.#.
    ##.#.
    ####.
    #####

    #####
    #####
    #.###
    ..#.#
    ..#.#
    ..#..
    .....

    #####
    #####
    ###.#
    #.#..
    #.#..
    #....
    .....

    #####
    #####
    #####
    .#.##
    .#.#.
    ...#.
    .....

    .....
    .#..#
    .#..#
    .#..#
    ##..#
    ###.#
    #####

    .....
    .....
    #..#.
    #.##.
    ####.
    #####
    #####

    #####
    ##.##
    .#..#
    .#..#
    .#..#
    ....#
    .....

    #####
    #.##.
    #.##.
    #.##.
    #..#.
    #....
    .....

    .....
    .....
    ..#..
    ..##.
    .###.
    ####.
    #####

    #####
    #####
    ##.##
    .#.##
    ...##
    ....#
    .....

    #####
    #.###
    ..###
    ..##.
    ..#..
    .....
    .....

    .....
    ....#
    ....#
    ..#.#
    ..#.#
    #.#.#
    #####

    #####
    .###.
    .#.#.
    ...#.
    .....
    .....
    .....

    .....
    ...#.
    .#.#.
    .#.##
    .#.##
    ##.##
    #####

    #####
    .####
    .####
    .###.
    .##..
    ..#..
    .....

    .....
    ...#.
    #..#.
    #..#.
    #.##.
    #.###
    #####

    #####
    ####.
    ##.#.
    ##.#.
    #..#.
    #....
    .....

    .....
    .#...
    ##...
    ###..
    ###.#
    ###.#
    #####

    .....
    ..#..
    ..#..
    ..#.#
    .##.#
    #####
    #####

    #####
    #.#.#
    #.#.#
    ....#
    .....
    .....
    .....

    #####
    #####
    .#.##
    .#..#
    ....#
    ....#
    .....

    #####
    ##.##
    .#.#.
    ...#.
    ...#.
    ...#.
    .....

    #####
    #####
    ####.
    ##.#.
    ##.#.
    .#.#.
    .....

    .....
    .....
    ....#
    .#.##
    .####
    #####
    #####

    .....
    ...#.
    ...#.
    ..##.
    .####
    .####
    #####

    .....
    .....
    #....
    #.#..
    #.#.#
    ###.#
    #####

    #####
    #####
    ####.
    .###.
    .#.#.
    .#.#.
    .....

    #####
    ###.#
    ##..#
    ##...
    ##...
    #....
    .....

    #####
    #.###
    #.##.
    #.#..
    ..#..
    ..#..
    .....

    .....
    .#...
    .#.#.
    ####.
    #####
    #####
    #####

    #####
    #####
    ####.
    #.#..
    #.#..
    #.#..
    .....

    #####
    ####.
    ####.
    .##..
    ..#..
    ..#..
    .....

    .....
    .....
    .....
    ..#.#
    #.#.#
    #.#.#
    #####

    .....
    .#..#
    .#..#
    ##.##
    ##.##
    ##.##
    #####
    """;

var lines = input.Split("\r\n");
var locks = new List<char[][]>();
var keys = new List<char[][]>();
var lockHeight = new List<List<int>>();
var keyHeight = new List<List<int>>();

var matches = 0;
GetLocksAndKeys();

for (var i = 0; i < lockHeight.Count; i++)
{
    for (var j = 0; j < keyHeight.Count; j++)
    {
        if (CouldMatch(lockHeight[i], keyHeight[j]))
        {
            matches++;
        }
    }
}

Console.WriteLine($"Possible: {matches}");

bool CouldMatch(List<int> loq, List<int> key)
{
    for (var i = 0; i < loq.Count; i++)
    {
        if (loq[i] + key[i] > 7)
        {
            return false;
        }
    }
    return true;
}

void GetLocksAndKeys()
{
    for (var i = 0; i < lines.Length; i += 8)
    {
        var grid = lines.Skip(i).Take(7).Select(x => x.ToArray()).ToArray();

        var key = true;

        for (var j = 0; j < grid[0].Length; j++)
        {
            if (grid[0][j] != '#')
            {
                key = false;
                break;
            }
        }
        var heights = new List<int>();
        
        for (var j = 0; j < grid[0].Length; j++)
        {
            var height = 0;
            for (var k = 0; k < grid.Length; k++)
            {
                if (grid[k][j] == '#')
                {
                    height++;
                }
            }
            heights.Add(height);
        }

        if (key)
        {
            keys.Add(grid);
            keyHeight.Add(heights);
        }
        else
        {
            locks.Add(grid);
            lockHeight.Add(heights);
        }
    }
}
